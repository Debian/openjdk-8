Description: Hack for GNU/kFreeBSD platform: add some sleep during build.
 We add some <sleep/> call in jaxp/jaxws/langtool ANT build.xml to get
 a build of those JAR archives with *all* classes.
 Without this hack, JAR contains only part of expected classes and so
 we have many random/unexpected build failures.
 TODO: I suspect some issue with jar tool and/or jar Ant task which might
 not handle correctly timestamp on UFS filesystem ?!
 <http://ant.apache.org/manual/Tasks/jar.html>
 TODO: We should drop this patch and found a proper fix.
Author: Damien Raude-Morvan <drazzib@debian.org>
Author: Guido GÃ¼nther <agx@sigxcpu.org>
Last-Update: 2013-05-07
Forwarded: no
diff --git openjdk/jaxp/build.xml openjdk/jaxp/build.xml
index 8ebf59b..7b93c17 100644
--- openjdk/jaxp/build.xml
+++ openjdk/jaxp/build.xml
@@ -92,7 +92,13 @@
 	    depends="init, -dist-classes-jar-uptodate"
             unless="dist.classes.jar.uptodate">
         <delete file="${dist.classes.jar}"/>
+
+<sleep seconds="70"/>
+
         <jar file="${dist.classes.jar}" basedir="${build.classes.dir}"/>
+
+<sleep seconds="70"/>
+
     </target>
 
     <target name="-build-setup"
@@ -127,6 +133,9 @@
             <compilerarg value="-J-Xbootclasspath/p:${javac.jar}"/>
             <compilerarg line="${javac.version.opt} ${javac.lint.opts} ${javac.no.jdk.warnings}"/>
         </javac>
+
+<sleep seconds="70"/>
+
     </target>
 
     <!-- Test. (FIXME: Need to know how to run tests.) -->
diff --git openjdk/jaxws/build.xml openjdk/jaxws/build.xml
index d0946b4..5ff5d82 100644
--- openjdk/jaxws/build.xml
+++ openjdk/jaxws/build.xml
@@ -100,7 +100,13 @@
 	    depends="init, -dist-classes-jar-uptodate"
             unless="dist.classes.jar.uptodate">
         <delete file="${dist.classes.jar}"/>
+
+<sleep seconds="70"/>
+
         <jar file="${dist.classes.jar}" basedir="${build.classes.dir}"/>
+
+<sleep seconds="70"/>
+
     </target>
 
     <!-- Special build area setup. -->
@@ -149,6 +155,9 @@
             <compilerarg line="${javac.version.opt} ${javac.lint.opts} ${javac.no.jdk.warnings}"/>
             <src refid="src.dir.id"/>
         </javac>
+
+<sleep seconds="70"/>
+
     </target>
 
     <!-- Test. (FIXME: Need to know how to run tests.) -->
diff --git openjdk/langtools/make/build.xml openjdk/langtools/make/build.xml
index 6fbc7f9..957b03d 100644
--- openjdk/langtools/make/build.xml
+++ openjdk/langtools/make/build.xml
@@ -234,6 +234,9 @@
             <include name="*"/>
         </chmod>
         <mkdir dir="${dist.lib.dir}"/>
+
+<sleep seconds="70"/>
+
         <jar file="${dist.lib.dir}/classes.jar" basedir="${build.classes.dir}"/>
         <zip file="${dist.lib.dir}/src.zip" basedir="${src.classes.dir}"/>
     </target>
@@ -731,6 +734,9 @@
             <attribute name="jarclasspath" default=""/>
             <sequential>
                 <mkdir dir="@{lib.dir}"/>
+
+<sleep seconds="70"/>
+
                 <jar destfile="@{lib.dir}/@{name}.jar"
                      basedir="@{classes.dir}"
                      includes="@{includes}">
@@ -858,6 +864,9 @@
                destdir="${build.toolclasses.dir}/"
                classpath="${ant.core.lib}"
                includeantruntime="false"/>
+
+<sleep seconds="70"/>
+
         <taskdef name="pcompile"
                  classname="CompilePropertiesTask"
                  classpath="${build.toolclasses.dir}/"/>
-- 
1.7.10.4

